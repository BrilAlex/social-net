"use strict";(self.webpackChunksocial_net_ts_project=self.webpackChunksocial_net_ts_project||[]).push([[402],{402:function(e,s,t){t.r(s),t.d(s,{default:function(){return $}});var r=t(5671),i=t(3144),n=t(136),o=t(5716),a=t(2791),l={},u=t(885),c="ProfileInfo_profileBackground__Bx1Zq",d="ProfileInfo_profileInfoBlock__UNLcY",f="ProfileInfo_profileAvatar__zWGnu",p="ProfileInfo_profileInfo__7AkdH",h="ProfileInfo_contact__LlGr0",x=t(710),j=t(6159),m=t(7078),v="ProfileStatus_status__qYimw",_="ProfileStatus_statusText__UT0FH",b="ProfileStatus_statusInput__puiLW",P=t(184),g=function(e){var s=(0,a.useState)(e.status),t=(0,u.Z)(s,2),r=t[0],i=t[1],n=(0,a.useState)(!1),o=(0,u.Z)(n,2),l=o[0],c=o[1];(0,a.useEffect)((function(){i(e.status)}),[e.status]);return(0,P.jsxs)("div",{className:v,children:[(0,P.jsx)("b",{children:"Status: "}),!l&&(0,P.jsx)("span",{className:_,onDoubleClick:function(){c(!0)},children:e.status||"------"}),l&&(0,P.jsx)("input",{className:b,value:r,onChange:function(e){i(e.currentTarget.value)},onBlur:function(){c(!1),e.updateStatus(r)},autoFocus:!0})]})},k=t(5889),N=t(704),S=t(5032),A=(0,N.Z)({form:"editProfileForm"})((function(e){var s=e.handleSubmit,t=e.error,r=e.profile;return(0,P.jsxs)("form",{onSubmit:s,children:[(0,P.jsx)("h3",{children:"Profile info:"}),t&&(0,P.jsx)("div",{className:S.Z.formError,children:t}),(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"Name"}),":",(0,k.Gr)("fullName","Full name",[],k.II)]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"About me"}),":",(0,k.Gr)("aboutMe","About me",[],k.gx)]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"Looking for a job"}),":",(0,k.Gr)("lookingForAJob","About me",[],k.II,{type:"checkbox"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"My skills"}),":",(0,k.Gr)("lookingForAJobDescription","My skills",[],k.gx)]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{children:(0,P.jsx)("b",{children:"Contacts"})}),Object.keys(r.contacts).map((function(e){return(0,P.jsxs)("div",{children:[e,": ",(0,k.Gr)("contacts."+e,e,[],k.II)]},e)}))]}),(0,P.jsx)("div",{children:(0,P.jsx)("button",{children:"Save"})})]})})),I=function(e){var s=e.contactTitle,t=e.contactValue;return(0,P.jsxs)("p",{className:h,children:[s,": ",t]})},y=function(e){var s=e.profile,t=e.isOwner,r=e.enableEditMode,i=Object.keys(s.contacts).map((function(e){var t=s.contacts[e];return(0,P.jsx)(I,{contactTitle:e,contactValue:t},e)}));return(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{children:"Profile info:"}),(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"Name"}),": ",s.fullName]}),s.aboutMe&&(0,P.jsxs)("p",{children:[(0,P.jsx)("b",{children:"About me"}),": ",s.aboutMe]}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{children:[(0,P.jsx)("b",{children:"Looking for a job"}),": ",s.lookingForAJob?"Yes":"No"]}),s.lookingForAJob&&(0,P.jsxs)("p",{children:[(0,P.jsx)("b",{children:"My skills"}),": ",s.lookingForAJobDescription]})]}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{children:[(0,P.jsx)("b",{children:"Contacts"}),":"]}),i]}),t&&(0,P.jsx)("div",{children:(0,P.jsx)("button",{onClick:r,children:"Edit"})})]})},w=function(e){var s=e.isOwner,t=e.profile,r=e.status,i=e.updateStatus,n=e.saveAvatar,o=e.saveProfile,l=(0,a.useState)(!1),h=(0,u.Z)(l,2),v=h[0],_=h[1];if(!t)return(0,P.jsx)(j.p,{});var b=t.photos.large||m;return(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:c,children:(0,P.jsx)("img",{src:x,alt:"Profile background"})}),(0,P.jsxs)("div",{className:d,children:[(0,P.jsxs)("div",{className:f,children:[(0,P.jsx)("img",{src:b,alt:t.fullName}),s&&(0,P.jsx)("input",{type:"file",onChange:function(e){e.currentTarget.files&&e.currentTarget.files.length&&n(e.currentTarget.files[0])}})]}),(0,P.jsxs)("div",{className:p,children:[(0,P.jsx)(g,{status:r,updateStatus:i}),v?(0,P.jsx)(A,{initialValues:t,onSubmit:function(e){o(e).then((function(){_(!1)}))},profile:t}):(0,P.jsx)(y,{profile:t,isOwner:s,enableEditMode:function(){return _(!0)}})]})]})]})},C=t(2982),T="MyPosts_postsBlock__uCZ+H",M="MyPosts_newPostBlock__7hqym",Z="MyPosts_postsList__L7tuz",D="Post_item__6phKj",F="Post_itemText__QqxTt",U=function(e){return(0,P.jsxs)("div",{className:D,children:[(0,P.jsx)("img",{src:m,alt:"User Avatar"}),(0,P.jsxs)("div",{className:F,children:[(0,P.jsx)("p",{children:e.postText}),(0,P.jsxs)("p",{children:["Likes: ",e.likesCount]})]})]})},L=t(6139),O=t(3079),E="AddNewPostForm_submitButton__e7CF0",B=(0,O.D)(10),G=(0,N.Z)({form:"addNewPostForm"})((function(e){return(0,P.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,P.jsx)(L.Z,{name:"newPostText",component:k.gx,placeholder:"Enter new post text",validate:[O.C,B]}),(0,P.jsx)("button",{className:E,children:"Add post"})]})})),q=(0,a.memo)((function(e){var s=(0,C.Z)(e.posts).reverse().map((function(e){return(0,P.jsx)(U,{postText:e.postText,likesCount:e.likesCount},e.id)}));return(0,P.jsxs)("div",{className:T,children:[(0,P.jsx)("h3",{children:"My posts"}),(0,P.jsx)("div",{className:M,children:(0,P.jsx)(G,{onSubmit:function(s){e.addNewPost(s.newPostText)}})}),(0,P.jsx)("div",{className:Z,children:s})]})})),J=t(6407),z=t(7375),H=(0,z.$j)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addNewPost:function(s){e((0,J.EQ)(s))}}}))(q),V=function(e){return(0,P.jsxs)("div",{className:l.profilePage,children:[(0,P.jsx)(w,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,saveAvatar:e.saveAvatar,saveProfile:e.saveProfile}),(0,P.jsx)(H,{})]})},Y=t(9723),Q=t(7781),W=function(e){(0,n.Z)(t,e);var s=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),s.apply(this,arguments)}return(0,i.Z)(t,[{key:"refreshProfile",value:function(){var e=Number(this.props.match.params.userID);e||(e=this.props.authorizedUser_ID)||this.props.history.push("/login"),e&&(this.props.getUserProfile(e),this.props.getUserStatus(e))}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userID!==e.match.params.userID&&this.refreshProfile()}},{key:"render",value:function(){var e=this.props,s=e.profile,t=e.status,r=e.updateUserStatus,i=e.saveAvatar,n=e.saveProfile;return(0,P.jsx)(V,{isOwner:!this.props.match.params.userID,profile:s,status:t,updateStatus:r,saveAvatar:i,saveProfile:n})}}]),t}(a.Component),$=(0,Q.qC)((0,z.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUser_ID:e.auth.user_ID,isAuth:e.auth.isAuth}}),{getUserProfile:J.et,getUserStatus:J.Tq,updateUserStatus:J.OL,saveAvatar:J.Mc,saveProfile:J.Ii}),Y.EN)(W)},710:function(e,s,t){e.exports=t.p+"static/media/default_profile_bg.f5f7bf54e7ca0324c836.jpg"}}]);
//# sourceMappingURL=402.25a5bc50.chunk.js.map