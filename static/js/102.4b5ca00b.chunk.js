"use strict";(self.webpackChunksocial_net_ts_project=self.webpackChunksocial_net_ts_project||[]).push([[102],{2102:function(s,t,e){e.r(t),e.d(t,{default:function(){return J}});var r=e(5671),a=e(3144),o=e(136),i=e(5716),n=e(2791),u={},l="ProfileInfo_profileBackground__Bx1Zq",c="ProfileInfo_profileInfoBlock__UNLcY",p="ProfileInfo_profileAvatar__zWGnu",f="ProfileInfo_profileInfo__7AkdH",d=e(710),h=e(6159),m=e(7078),x=e(885),_="ProfileStatus_status__qYimw",j="ProfileStatus_statusText__UT0FH",v="ProfileStatus_statusInput__puiLW",g=e(184),P=function(s){var t=(0,n.useState)(s.status),e=(0,x.Z)(t,2),r=e[0],a=e[1],o=(0,n.useState)(!1),i=(0,x.Z)(o,2),u=i[0],l=i[1];(0,n.useEffect)((function(){a(s.status)}),[s.status]);return(0,g.jsxs)("div",{className:_,children:[!u&&(0,g.jsx)("span",{className:j,onDoubleClick:function(){l(!0)},children:s.status||"------"}),u&&(0,g.jsx)("input",{className:v,value:r,onChange:function(s){a(s.currentTarget.value)},onBlur:function(){l(!1),s.updateStatus(r)},autoFocus:!0})]})},N=function(s){var t=s.isOwner,e=s.profile,r=s.status,a=s.updateStatus,o=s.saveAvatar;if(!e)return(0,g.jsx)(h.p,{});var i=e.photos.large||m;return(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:l,children:(0,g.jsx)("img",{src:d,alt:"Profile background"})}),(0,g.jsxs)("div",{className:c,children:[(0,g.jsxs)("div",{className:p,children:[(0,g.jsx)("img",{src:i,alt:e.fullName}),t&&(0,g.jsx)("input",{type:"file",onChange:function(s){s.currentTarget.files&&s.currentTarget.files.length&&o(s.currentTarget.files[0])}})]}),(0,g.jsxs)("div",{className:f,children:[(0,g.jsx)("h3",{children:"Profile description:"}),(0,g.jsxs)("p",{children:["Name: ",e.fullName]}),(0,g.jsx)(P,{status:r,updateStatus:a}),e.aboutMe&&(0,g.jsxs)("p",{children:["About me: ",e.aboutMe]}),e.lookingForAJob?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{children:"Looking for a job: Yes"}),(0,g.jsx)("p",{children:e.lookingForAJobDescription})]}):(0,g.jsx)("p",{children:"Looking for a job: No"})]})]})]})},k=e(2982),b="MyPosts_postsBlock__uCZ+H",S="MyPosts_newPostBlock__7hqym",A="MyPosts_postsList__L7tuz",w="Post_item__6phKj",I="Post_itemText__QqxTt",T=function(s){return(0,g.jsxs)("div",{className:w,children:[(0,g.jsx)("img",{src:m,alt:"User Avatar"}),(0,g.jsxs)("div",{className:I,children:[(0,g.jsx)("p",{children:s.postText}),(0,g.jsxs)("p",{children:["Likes: ",s.likesCount]})]})]})},C=e(6139),y=e(704),D=e(3079),U=e(5889),Z="AddNewPostForm_submitButton__e7CF0",F=(0,D.D)(10),L=(0,y.Z)({form:"addNewPostForm"})((function(s){return(0,g.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,g.jsx)(C.Z,{name:"newPostText",component:U.gx,placeholder:"Enter new post text",validate:[D.C,F]}),(0,g.jsx)("button",{className:Z,children:"Add post"})]})})),M=(0,n.memo)((function(s){var t=(0,k.Z)(s.posts).reverse().map((function(s){return(0,g.jsx)(T,{postText:s.postText,likesCount:s.likesCount},s.id)}));return(0,g.jsxs)("div",{className:b,children:[(0,g.jsx)("h3",{children:"My posts"}),(0,g.jsx)("div",{className:S,children:(0,g.jsx)(L,{onSubmit:function(t){s.addNewPost(t.newPostText)}})}),(0,g.jsx)("div",{className:A,children:t})]})})),B=e(6407),q=e(7375),O=(0,q.$j)((function(s){return{posts:s.profilePage.posts}}),(function(s){return{addNewPost:function(t){s((0,B.EQ)(t))}}}))(M),z=function(s){return(0,g.jsxs)("div",{className:u.profilePage,children:[(0,g.jsx)(N,{isOwner:s.isOwner,profile:s.profile,status:s.status,updateStatus:s.updateStatus,saveAvatar:s.saveAvatar}),(0,g.jsx)(O,{})]})},E=e(9723),H=e(7781),Y=function(s){(0,o.Z)(e,s);var t=(0,i.Z)(e);function e(){return(0,r.Z)(this,e),t.apply(this,arguments)}return(0,a.Z)(e,[{key:"refreshProfile",value:function(){var s=Number(this.props.match.params.userID);s||(s=this.props.authorizedUser_ID)||this.props.history.push("/login"),s&&(this.props.getUserProfile(s),this.props.getUserStatus(s))}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s){this.props.match.params.userID!==s.match.params.userID&&this.refreshProfile()}},{key:"render",value:function(){var s=this.props,t=s.profile,e=s.status,r=s.updateUserStatus,a=s.saveAvatar;return(0,g.jsx)(z,{isOwner:!this.props.match.params.userID,profile:t,status:e,updateStatus:r,saveAvatar:a})}}]),e}(n.Component),J=(0,H.qC)((0,q.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUser_ID:s.auth.user_ID,isAuth:s.auth.isAuth}}),{getUserProfile:B.et,getUserStatus:B.Tq,updateUserStatus:B.OL,saveAvatar:B.Mc}),E.EN)(Y)},710:function(s,t,e){s.exports=e.p+"static/media/default_profile_bg.f5f7bf54e7ca0324c836.jpg"}}]);
//# sourceMappingURL=102.4b5ca00b.chunk.js.map